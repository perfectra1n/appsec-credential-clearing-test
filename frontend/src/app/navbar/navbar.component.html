<mat-toolbar class="mat-elevation-z6" color="primary" fxLayout="column" xmlns="http://www.w3.org/1999/html">

  <mat-toolbar-row fxLayout="row">

    <button (click)="onToggleSidenav()" mat-button style="height:48px; width: 48px;">
      <mat-icon>menu</mat-icon>
    </button>

    <a routerLink="/search">
      <img [src]="logoSrc" class="logo" alt={{applicationName}}>
    </a>

    <span fxHide.lt-sm fxShow>{{applicationName}}</span>

    <span class="fill-remaining-space"></span>

    <mat-search-bar #searchControl id="searchQuery" (onEnter)="search(searchControl.value)"></mat-search-bar>

    <button [matMenuTriggerFor]="userMenu" mat-button style="vertical-align: middle; height:48px;" class="buttons" fxHide.lt-md fxShow>
      <i class="material-icons">
        account_circle
      </i>
      <span> {{"ACCOUNT" | translate}} </span>
    </button>

    <mat-menu #userMenu="matMenu">
      <button *ngIf="!isLoggedIn()" mat-menu-item routerLink="/login">
        <mat-icon>
          exit_to_app
        </mat-icon>
        <span>
          {{"TITLE_LOGIN" | translate }}
        </span>
      </button>
      <button (click)="goToProfilePage()" *ngIf="isLoggedIn()" mat-menu-item>
        <mat-icon>
          account_circle
        </mat-icon>
        <span>
          {{userEmail}}
        </span>
      </button>
      <button mat-menu-item *ngIf="isLoggedIn()" [matMenuTriggerFor]="subMenu">
        <mat-icon>
          enhanced_encryption
        </mat-icon>
        <span>
          {{ "PRIVACY_AND_SECURITY" | translate }}
        </span>
      </button>
      <button *ngIf="isLoggedIn()" mat-menu-item routerLink="/recycle">
        <mat-icon>
          autorenew
        </mat-icon>
        <span>
          {{"NAV_RECYCLE" | translate}}
        </span>
      </button>
      <button *ngIf="isLoggedIn()" mat-menu-item routerLink="/track-order">
        <mat-icon>
          local_shipping
        </mat-icon>
        <span>
          {{"TITLE_TRACK_ORDERS" | translate}}
        </span>
      </button>
      <button (click)="logout()" *ngIf="isLoggedIn()" mat-menu-item>
        <mat-icon>
          power_settings_new
        </mat-icon>
        <span>
          {{"TITLE_LOGOUT" | translate }}
        </span>
      </button>
    </mat-menu>

    <button *ngIf="isLoggedIn()" mat-button routerLink="/basket" style="height:48px;" class="buttons">
      <mat-icon>
        shopping_cart
      </mat-icon>
      <span fxHide.lt-md fxShow> {{"TITLE_BASKET" | translate}}</span>
    </button>

    <button [matMenuTriggerFor]="menu" mat-button style="height:48px; width: 48px;" class="buttons">
      <mat-icon>
        language
      </mat-icon>
    </button>

    <mat-menu #menu="matMenu" [overlapTrigger]="true">
      <button (click)="changeLanguage(language.key)" *ngFor="let language of languages" [value]="language"
              mat-menu-item>
        <span *ngFor="let icon of language.icons" [class]="'flag-icon flag-icon-' + icon"></span>
        {{language?.lang}}
        <i
          [class]="'fas fa-thermometer-' + language.gauge + (language.percentage > 70 ? ' confirmation' : ' error')"></i>
      </button>
    </mat-menu>

    <mat-menu #subMenu="matMenu">
      <button mat-menu-item [routerLink]="['privacy-security/privacy-policy']"><span
        translate>TITLE_PRIVACY_POLICY</span></button>
      <button mat-menu-item [routerLink]="['privacy-security/two-factor-authentication']"><span translate>TITLE_TWO_FACTOR_AUTHENTICATION</span>
      </button>
      <button mat-menu-item [routerLink]="['privacy-security/change-password']"><span
        translate>TITLE_CHANGE_PASSWORD</span></button>
      <button mat-menu-item [routerLink]="['privacy-security/last-login-ip']"><span translate>LAST_LOGIN_IP</span>
      </button>
      <button mat-menu-item [routerLink]="['privacy-security/data-export']"><span
        translate>TITLE_REQUEST_DATA_EXPORT</span></button>
    </mat-menu>

  </mat-toolbar-row>
</mat-toolbar>
